(this["webpackJsonpthree-d-rendering-engine"]=this["webpackJsonpthree-d-rendering-engine"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(7),o=n.n(i),c=(n(13),n(14),n(1)),s=n(4),u=n(3),l=n(2),h=n(5),d="undefined"!==typeof Float32Array?Float32Array:Array,f=Math.random;Math.PI;function v(){var t=new d(3);return d!==Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function m(t,e,n){var r=new d(3);return r[0]=t,r[1]=e,r[2]=n,r}function w(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function g(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function p(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function _(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function y(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function M(t,e){e=e||1;var n=2*f()*Math.PI,r=2*f()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function j(t){var e=t[0],n=t[1],r=t[2],a=Math.sqrt(e*e+n*n+r*r),i=new d(3);return i[0]=e/a,i[1]=n/a,i[2]=r/a,i}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});!function(){var t=v()}();var O=function t(e,n){var r=this;Object(c.a)(this,t),this.origin=function(){return r.orig},this.direction=function(){return r.dir},this.at=function(t){return b(v(),r.orig,r.dir,t)},e&&n?(this.orig=e,this.dir=n):(this.orig=m(0,0,0),this.dir=m(0,0,0))};function k(){var t=this;this.p=v(),this.normal=v(),this.t=0,this.front_face=!1,this.set_face_normal=function(e,n){t.front_face=y(e.direction(),n),t.normal=t.front_face?n:-n},this.copy=function(e){t.p=e.p,t.normal=e.normal,t.t=e.t,t.front_face=e.front_face}}var E=function t(){Object(c.a)(this,t),this.hit=function(t,e,n,r){}},I=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(c.a)(this,n),(r=e.call(this)).objects=[],r.add=function(t){return r.objects.push(t)},r.length=function(){return r.objects.length},r.clear=function(){r.objects=[]},r.hit=function(t,e,n,a){for(var i=new k,o=!1,c=n,s=0;s<r.length();s++)r.objects[s].hit(t,e,c,i)&&(o=!0,c=i.t,a.copy(i));return o},void 0!==t&&r.add(t),r}return n}(E),A=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,r){var a;return Object(c.a)(this,n),(a=e.call(this)).hit=function(t,e,n,r){var i=v();i=g(i,t.origin(),a.center);var o=_(t.direction()),c=y(i,t.direction()),s=c*c-o*(_(i)-a.radius*a.radius);if(s>0){var u=Math.sqrt(s),l=(-c-u)/o;if(l<n&&l>e){r.t=l,r.p=t.at(r.t);var h=v();return h=j(h=g(h,r.p,a.center)),r.set_face_normal(t,h),!0}if((l=(-c+u)/o)<n&&l>e){r.t=l,r.p=t.at(r.t);var d=v();return d=j(d=g(d,r.p,a.center)),r.set_face_normal(t,d),!0}}return!1},a.center=t,a.radius=r,a}return n}(E);var x=function(t,e,n,r){var a=this;this.aspect_ratio=t,this.viewport_height=e,this.viewport_width=t*e,this.focal_length=n,this.origin=m(0,0,r),this.horizontal=m(this.viewport_width,0,0),this.vertical=m(0,e,0),this.lower_left_corner=v(),b(this.lower_left_corner,this.origin,this.horizontal,-.5),b(this.lower_left_corner,this.lower_left_corner,this.vertical,-.5),g(this.lower_left_corner,this.lower_left_corner,m(0,0,n)),this.get_ray=function(t,e){var n=v();return b(n,a.lower_left_corner,a.horizontal,t),b(n,n,a.vertical,e),g(n,n,a.origin),new O(a.origin,n)}},q=function(t,e,n){return t<e?e:t>n?n:t},C=function(){return new M(new v,1)},T=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(c.a)(this,n),(r=e.call(this,t)).hit_sphere=function(t,e,n){var a=v();a=g(a,n.origin(),r.center);var i=_(n.direction()),o=y(a,n.direction()),c=o*o-i*(_(a)-r.radius*r.radius);return c<0?-1:Math.min((-o-Math.sqrt(c))/i,(-o+Math.sqrt(c))/i)},r.ray_color=function(t,e,n,a){var i=new k;if(a<=0)return v();if(n.hit(t,.001,Math.pow(10,10)/1,i)){var o=v();return w(o,i.p,i.normal),w(o,o,C()),p(v(),r.ray_color(new O(i.p,g(v(),o,i.p)),e,n,a-1),.5)}var c=j(t.direction()),s=Math.abs(c[1]),u=p(v(),m(1,1,1),1-s),l=p(v(),m(.5,.7,e),s);return w(v(),u,l)},r.buildImage=function(t){r.setState({animate:!1},(function(){r.b=0,r.drawImage(t,!1)}))},r.drawImage=function(t,e){var n=r.state.canvasDOM;n.style.visibility="visible";var a=n.height,i=n.width,o=i/a,c=r.props.samples_per_pixel,s=new I;s.add(new A(m(0,0,-1),.5)),s.add(new A(m(-1,0,-1),.25)),s.add(new A(m(1,0,-1),.25)),s.add(new A(m(0,1,-1),.25)),s.add(new A(m(2,0,1),.5)),s.add(new A(m(1,0,1),.25)),s.add(new A(m(3,0,1),.25)),s.add(new A(m(2,1,1),.25)),s.add(new A(m(-2,0,2),.5)),s.add(new A(m(-1,0,2.4),.25)),s.add(new A(m(-3,0,2.9),.25)),s.add(new A(m(-2,1,3),.25)),s.add(new A(m(0,-100.5,-1),100));var u=new x(o,2,1,t),l=r.state.ctx,d=l.getImageData(0,0,i,a),f=d.data,v=f.length/4;e&&(c=1);var w=e?c:1,g=new Float32Array(3*v),p=document.getElementById("passValue"),b=document.getElementById("timeTaken");var _=function e(){w<c&&setTimeout(e.bind(this));for(var n=Date.now(),r=0;r<a;r++)for(var o=0;o<i;o++){var h=3*((a-r-1)*i+o),m=(o+Math.random())/(i+1),_=(r+Math.random())/(a+1),y=u.get_ray(m,_),M=this.ray_color(y,Math.abs(t),s,50);g[h]+=M[0],g[h+1]+=M[1],g[h+2]+=M[2]}for(var j=0;j<v;j++){var O=4*j,k=3*j;f[O]=Math.floor(256*q(Math.sqrt(g[k]/w),0,.9999)),f[O+1]=Math.floor(256*q(Math.sqrt(g[k+1]/w),0,.9999)),f[O+2]=Math.floor(256*q(Math.sqrt(g[k+2]/w),0,.9999)),f[O+3]=255}l.putImageData(d,0,0);var E=Date.now();p.innerText="Pass: ".concat(w,"/").concat(c);var I=((E-n)/1e3).toPrecision(3);b.innerText="Time Taken: ".concat(I,"s"),w++}.bind(Object(h.a)(r));setTimeout((function(){return _()}))},r.animate=function(){r.state.animate&&(requestAnimationFrame(r.animate),r.drawImage(r.b,!0),r.b+=.2,r.b>20&&(r.b=0))},r.toggleAnimation=function(){r.setState({animate:!r.state.animate},(function(){r.state.animate&&r.animate()}))},r.state={canvasDOM:null,ctx:null,animate:!1},r.b=0,r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=document.getElementById("myCanvas");t.style.visibility="hidden",t.width=this.props.width,t.height=this.props.height;var e=t.getContext("2d");this.setState({canvasDOM:t,ctx:e})}},{key:"render",value:function(){var t=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return t.buildImage(1)},id:"buildImageBtn",className:"btn"},"Build Image"),a.a.createElement("button",{onClick:function(){return t.toggleAnimation()},id:"buildImageBtn2",className:"btn"},this.state.animate?"Stop ":"Start ","Animation"),a.a.createElement("p",{id:"passValue"}),a.a.createElement("p",{id:"timeTaken"}),a.a.createElement("canvas",{id:"myCanvas"}))}}]),n}(r.Component),S=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;Object(c.a)(this,n),r=e.call(this,t);var a=window.innerWidth,i=window.innerHeight,o=a/i,s=Math.floor(.5*a),u=Math.floor(.5*i);return r.state={aspectRatio:o,width:s,height:u,samples_per_pixel:100},r}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"main-content"},a.a.createElement("div",{className:"canvas-container"},a.a.createElement(T,{samples_per_pixel:this.state.samples_per_pixel,width:this.state.width,height:this.state.height}))))}}]),n}(a.a.Component);var W=function(){return a.a.createElement(S,null)},B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}o.a.render(a.a.createElement(W,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");B?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):D(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):D(e,t)}))}}()},8:function(t,e,n){t.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.49f28987.chunk.js.map