(this["webpackJsonpthree-d-rendering-engine"]=this["webpackJsonpthree-d-rendering-engine"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(7),o=n.n(i),c=(n(13),n(14),n(1)),s=n(4),u=n(3),h=n(2),l=n(5),f="undefined"!==typeof Float32Array?Float32Array:Array,d=Math.random;Math.PI;function m(){var t=new f(3);return f!==Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function v(t,e,n){var a=new f(3);return a[0]=t,a[1]=e,a[2]=n,a}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function p(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function b(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function g(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function _(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function y(t,e,n,a){return t[0]=e[0]+n[0]*a,t[1]=e[1]+n[1]*a,t[2]=e[2]+n[2]*a,t}function M(t){var e=t[0],n=t[1],a=t[2];return e*e+n*n+a*a}function j(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function O(t,e){e=e||1;var n=2*d()*Math.PI,a=2*d()-1,r=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=a*e,t}function E(t){var e=t[0],n=t[1],a=t[2],r=Math.sqrt(e*e+n*n+a*a),i=new f(3);return i[0]=e/r,i[1]=n/r,i[2]=a/r,i}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});!function(){var t=m()}();var I=function t(e,n){var a=this;Object(c.a)(this,t),this.origin=function(){return a.orig},this.direction=function(){return a.dir},this.at=function(t){return y(m(),a.orig,a.dir,t)},this.copy=function(t){a.orig=t.origin(),a.dir=t.direction()},e&&n?(this.orig=e,this.dir=n):(this.orig=v(0,0,0),this.dir=v(0,0,0))};function k(){var t=this;this.p=m(),this.normal=m(),this.t=0,this.front_face=!1,this.material=null,this.set_face_normal=function(e,n){t.front_face=j(e.direction(),n),t.normal=t.front_face?n:-n},this.copy=function(e){t.p=e.p,t.normal=e.normal,t.t=e.t,t.front_face=e.front_face,t.material=e.material}}var x=function t(){Object(c.a)(this,t),this.hit=function(t,e,n,a){}},A=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this)).objects=[],a.add=function(t){return a.objects.push(t)},a.length=function(){return a.objects.length},a.clear=function(){a.objects=[]},a.hit=function(t,e,n,r){for(var i=new k,o=!1,c=n,s=0;s<a.length();s++)a.objects[s].hit(t,e,c,i)&&(o=!0,c=i.t,r.copy(i));return o},void 0!==t&&a.add(t),a}return n}(x),q=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t,a,r){var i;return Object(c.a)(this,n),(i=e.call(this)).hit=function(t,e,n,a){var r=m();r=b(r,t.origin(),i.center);var o=M(t.direction()),c=j(r,t.direction()),s=c*c-o*(M(r)-i.radius*i.radius);if(s>0){var u=Math.sqrt(s),h=(-c-u)/o;if(h<n&&h>e){a.t=h,a.p=t.at(a.t);var l=m();return l=E(l=b(l,a.p,i.center)),a.set_face_normal(t,l),a.material=i.material,!0}if((h=(-c+u)/o)<n&&h>e){a.t=h,a.p=t.at(a.t);var f=m();return f=E(f=b(f,a.p,i.center)),a.set_face_normal(t,f),a.material=i.material,!0}}return!1},i.center=t,i.radius=a,i.material=r,i}return n}(x);var B=function(t,e,n,a){var r=this;this.aspect_ratio=t,this.viewport_height=e,this.viewport_width=t*e,this.focal_length=n,this.origin=v(0,a,3*a),this.horizontal=v(this.viewport_width,0,0),this.vertical=v(0,e,0),this.lower_left_corner=m(),y(this.lower_left_corner,this.origin,this.horizontal,-.5),y(this.lower_left_corner,this.lower_left_corner,this.vertical,-.5),b(this.lower_left_corner,this.lower_left_corner,v(0,0,n)),this.get_ray=function(t,e){var n=m();return y(n,r.lower_left_corner,r.horizontal,t),y(n,n,r.vertical,e),b(n,n,r.origin),new I(r.origin,n)}},D=function(t,e,n){return t<e?e:t>n?n:t},T=function(){return new O(new m,1)},z=function t(){Object(c.a)(this,t),this.scatter=function(t,e,n,a){}},C=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this)).scatter=function(t,e,n,r){var i=m();return p(i,e.p,e.normal),p(i,i,T()),function(t){var e=1e-8;return Math.abs(t[0])<e&&Math.abs(t[1])<e&&Math.abs(t[2])<e}(i)&&w(i,e.normal),r.copy(new I(e.p,b(m(),i,e.p))),w(n,a.albedo),!0},a.albedo=t,a}return n}(z),F=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t,a){var r;return Object(c.a)(this,n),(r=e.call(this)).scatter=function(t,e,n,a){var i,o,c=(i=E(t.direction()),o=e.normal,b(m(),i,_(m(),o,2*j(i,o))));return p(c,c,_(m(),T(),r.fuzz)),a.copy(new I(e.p,c)),w(n,r.albedo),j(a.direction(),e.normal)>0},r.albedo=t,r.fuzz=a,r}return n}(z),N=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).ray_color=function(t,e,n){var r=new k;if(n<=0)return m();if(e.hit(t,.001,Math.pow(10,10)/1,r)){var i=new I,o=m();return r.material.scatter(t,r,o,i)?g(m(),a.ray_color(i,e,n-1),o):m()}var c=E(t.direction()),s=Math.abs(c[1]),u=_(m(),v(1,1,1),1-s),h=_(m(),v(.5,.7,1),s);return p(m(),u,h)},a.buildImage=function(t){a.setState({animate:!1},(function(){a.b=0,a.drawImage(t,!1)}))},a.drawImage=function(t,e){var n=a.state.canvasDOM;n.style.visibility="visible";var r=n.height,i=n.width,o=i/r,c=a.props.samples_per_pixel,s=new A,u=new C(v(0,0,.8),0),h=new C(v(.8,.8,.1)),f=new F(v(.3,.3,.3),.1),d=new F(v(.3,.3,.3),0),m=new F(v(.3,.3,.3),.6);s.add(new q(v(0,0,-1),.5,f)),s.add(new q(v(-1,0,-1),.25,d)),s.add(new q(v(1,0,-1),.25,u)),s.add(new q(v(0,1,-1),.25,m)),s.add(new q(v(2,0,1),.5,u)),s.add(new q(v(1,0,1),.25,f)),s.add(new q(v(3,0,1),.25,d)),s.add(new q(v(2,1,1),.25,f)),s.add(new q(v(-2,0,2),.5,u)),s.add(new q(v(-1,0,2.4),.25,f)),s.add(new q(v(-3,0,2.9),.25,d)),s.add(new q(v(-2,1,3),.25,m)),s.add(new q(v(0,-200.5,-1),200,h));var w=new B(o,2,1,t),p=a.state.ctx,b=p.getImageData(0,0,i,r),g=b.data,_=g.length/4;e&&(c=1);var y=e?c:1,M=new Float32Array(3*_),j=document.getElementById("passValue"),O=document.getElementById("timeTaken");var E=function t(){y<c&&setTimeout(t.bind(this));for(var e=Date.now(),n=0;n<r;n++)for(var a=0;a<i;a++){var o=3*((r-n-1)*i+a),u=(a+Math.random())/(i+1),h=(n+Math.random())/(r+1),l=w.get_ray(u,h),f=this.ray_color(l,s,50);M[o]+=f[0],M[o+1]+=f[1],M[o+2]+=f[2]}for(var d=0;d<_;d++){var m=4*d,v=3*d;g[m]=Math.floor(256*D(Math.sqrt(M[v]/y),0,.9999)),g[m+1]=Math.floor(256*D(Math.sqrt(M[v+1]/y),0,.9999)),g[m+2]=Math.floor(256*D(Math.sqrt(M[v+2]/y),0,.9999)),g[m+3]=255}p.putImageData(b,0,0);var E=Date.now();j.innerText="Pass: ".concat(y,"/").concat(c);var I=((E-e)/1e3).toPrecision(3);O.innerText="Time Taken: ".concat(I,"s"),y++}.bind(Object(l.a)(a));setTimeout((function(){return E()}))},a.animate=function(){a.state.animate&&(requestAnimationFrame(a.animate),a.drawImage(a.b,!0),a.b+=.2,a.b>20&&(a.b=0))},a.toggleAnimation=function(){a.setState({animate:!a.state.animate},(function(){a.state.animate&&a.animate()}))},a.state={canvasDOM:null,ctx:null,animate:!1},a.b=0,a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=document.getElementById("myCanvas");t.style.visibility="hidden",t.width=this.props.width,t.height=this.props.height;var e=t.getContext("2d");this.setState({canvasDOM:t,ctx:e})}},{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return t.buildImage(.5)},id:"buildImageBtn",className:"btn"},"Build Image"),r.a.createElement("button",{onClick:function(){return t.toggleAnimation()},id:"buildImageBtn2",className:"btn"},this.state.animate?"Stop ":"Start ","Animation"),r.a.createElement("p",{id:"passValue"}),r.a.createElement("p",{id:"timeTaken"}),r.a.createElement("canvas",{id:"myCanvas"}))}}]),n}(a.Component),S=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var a;Object(c.a)(this,n),a=e.call(this,t);var r=window.innerWidth,i=window.innerHeight,o=r/i,s=Math.floor(.5*r),u=Math.floor(.5*i);return a.state={aspectRatio:o,width:s,height:u,samples_per_pixel:100},a}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"canvas-container"},r.a.createElement(N,{samples_per_pixel:this.state.samples_per_pixel,width:this.state.width,height:this.state.height}))))}}]),n}(r.a.Component);var P=function(){return r.a.createElement(S,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},8:function(t,e,n){t.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.6f1c153c.chunk.js.map