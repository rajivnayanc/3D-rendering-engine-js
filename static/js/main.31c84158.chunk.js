(this["webpackJsonpthree-d-rendering-engine"]=this["webpackJsonpthree-d-rendering-engine"]||[]).push([[0],{13:function(t,n,e){},14:function(t,n,e){},15:function(t,n,e){"use strict";e.r(n);var i=e(0),a=e.n(i),r=e(7),o=e.n(r),c=(e(13),e(14),e(1)),s=e(4),u=e(3),d=e(2),l=e(5),h=function t(n,e,i){var a=this;Object(c.a)(this,t),this.negative=function(){return new t(-a.x,-a.y,-a.z)},this.length_squared=function(){return a.x*a.x+a.y*a.y+a.z*a.z},this.length=function(){return Math.sqrt(a.length_squared())},this.add=function(n){return n instanceof t?new t(a.x+n.x,a.y+n.y,a.z+n.z):new t(a.x+n,a.y+n,a.z+n)},this.subtract=function(n){return n instanceof t?new t(a.x-n.x,a.y-n.y,a.z-n.z):new t(a.x-n,a.y-n,a.z-n)},this.multiply=function(n){return n instanceof t?new t(a.x*n.x,a.y*n.y,a.z*n.z):new t(a.x*n,a.y*n,a.z*n)},this.divide=function(n){return n instanceof t?new t(a.x/n.x,a.y/n.y,a.z/n.z):new t(a.x/n,a.y/n,a.z/n)},this.unit=function(){return a.divide(a.length())},this.x=n||0,this.y=e||0,this.z=i||0};h.print=function(t){t instanceof h&&console.log(t.x,t.y,t.z)},h.add=function(t,n){return t instanceof h?t.add(n):n instanceof h?n.add(t):void 0},h.subtract=function(t,n){return t instanceof h?t.subtract(n):n instanceof h?n.negative().add(t):void 0},h.multiply=function(t,n){return t instanceof h?t.multiply(n):n instanceof h?n.multiply(t):void 0},h.divide=function(t,n){if(t instanceof h)return t.divide(n)},h.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},h.cross=function(t,n){return new h(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z,t.x*n.y-t.y*n.x)},h.unit=function(t){return t.divide(t.length())},h.equals=function(t,n){return t instanceof h&&n instanceof h&&(t.x===n.x&&t.y===n.y&&t.z===n.z)};var f=function(t){Object(u.a)(e,t);var n=Object(d.a)(e);function e(){return Object(c.a)(this,e),n.apply(this,arguments)}return e}(h),m=function(t){Object(u.a)(e,t);var n=Object(d.a)(e);function e(){return Object(c.a)(this,e),n.apply(this,arguments)}return e}(h),v=function t(n,e){var i=this;Object(c.a)(this,t),this.origin=function(){return i.orig},this.direction=function(){return i.dir},this.at=function(t){return h.add(i.orig,h.multiply(i.dir,t))},n instanceof h&&e instanceof h?(this.orig=n,this.dir=e):(this.orig=new f(0,0,0),this.dir=new h(0,0,0))};function w(){var t=this;this.p=new f(0,0,0),this.normal=new h(0,0,0),this.t=0,this.front_face=!1,this.set_face_normal=function(n,e){t.front_face=h.dot(n.direction(),e),t.normal=t.front_face?e:-e},this.copy=function(n){t.p=n.p,t.normal=n.normal,t.t=n.t,t.front_face=n.front_face}}var g=function t(){Object(c.a)(this,t),this.hit=function(t,n,e,i){}},p=function(t){Object(u.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(c.a)(this,e),(i=n.call(this)).objects=[],i.add=function(t){return i.objects.push(t)},i.length=function(){return i.objects.length},i.clear=function(){i.objects=[]},i.hit=function(t,n,e,a){for(var r=new w,o=!1,c=e,s=0;s<i.length();s++)i.objects[s].hit(t,n,c,r)&&(o=!0,c=r.t,a.copy(r));return o},void 0!==t&&i.add(t),i}return e}(g),b=function(t){Object(u.a)(e,t);var n=Object(d.a)(e);function e(t,i){var a;return Object(c.a)(this,e),(a=n.call(this)).hit=function(t,n,e,i){var r=h.subtract(t.origin(),a.center),o=t.direction().length_squared(),c=h.dot(r,t.direction()),s=c*c-o*(r.length_squared()-a.radius*a.radius);if(s>0){var u=Math.sqrt(s),d=(-c-u)/o;if(d<e&&d>n){i.t=d,i.p=t.at(i.t);var l=h.unit(i.p.subtract(a.center));return i.set_face_normal(t,l),!0}if((d=(-c+u)/o)<e&&d>n){i.t=d,i.p=t.at(i.t);var f=h.unit(i.p.subtract(a.center));return i.set_face_normal(t,f),!0}}return!1},a.center=t,a.radius=i,a}return e}(g),y=function(t){Object(u.a)(e,t);var n=Object(d.a)(e);function e(t){var i;return Object(c.a)(this,e),(i=n.call(this,t)).hit_sphere=function(t,n,e){if(e instanceof v&&t instanceof h){var i=h.subtract(e.origin(),t),a=e.direction().length_squared(),r=h.dot(i,e.direction()),o=r*r-a*(i.length_squared()-n*n);return o<0?-1:Math.min((-r-Math.sqrt(o))/a,(-r+Math.sqrt(o))/a)}return-1},i.ray_color=function(t,n,e){var i=new w;if(e.hit(t,0,Math.pow(10,10)/1,i))return h.multiply(.5,i.normal.add(new m(1,1,1)));var a=h.unit(t.direction()),r=Math.abs(a.y);return m.multiply(new m(1,1,1),1-r).add(m.multiply(r,new m(.5,.7,n)))},i.buildImage=function(t){i.setState({animate:!1},(function(){i.b=0,i.drawImage(t)}))},i.clamp=function(t,n,e){return t<n?n:t>e?e:t},i.drawImage=function(t){var n=i.state.canvasDOM;n.style.visibility="visible";var e=n.height,a=n.width,r=a/e,o=i.props.samples_per_pixel,c=new p;c.add(new b(new f(0,0,-1),.5)),c.add(new b(new f(-1,0,-1),.25)),c.add(new b(new f(1,0,-1),.25)),c.add(new b(new f(0,1,-1),.25)),c.add(new b(new f(2,0,1),.5)),c.add(new b(new f(1,0,1),.25)),c.add(new b(new f(3,0,1),.25)),c.add(new b(new f(2,1,1),.25)),c.add(new b(new f(-2,0,2),.5)),c.add(new b(new f(-1,0,2.4),.25)),c.add(new b(new f(-3,0,2.9),.25)),c.add(new b(new f(-2,1,3),.25)),c.add(new b(new f(0,-100.5,-1),100));var s=2*r,u=new f(0,0,t),d=new h(s,0,0),m=new h(0,2,0),w=u.subtract(d.divide(2)).subtract(m.divide(2)).subtract(new h(0,0,1)),g=i.state.ctx,y=g.getImageData(0,0,a,e),x=y.data;console.log(x.length);var j=x.length/4,O=1,_=new Float32Array(3*j),z=document.getElementById("passValue"),k=document.getElementById("timeTaken");var M=function n(){O<o&&setTimeout(n.bind(this));for(var i=Date.now(),r=0;r<e;r++)for(var s=0;s<a;s++){var l=3*((e-r-1)*a+s),h=(s+Math.random())/(a+1),f=(r+Math.random())/(e+1),p=new v(u,w.add(d.multiply(h)).add(m.multiply(f)).subtract(u)),b=this.ray_color(p,Math.abs(t),c);_[l]+=b.x,_[l+1]+=b.y,_[l+2]+=b.z}for(var M=0;M<j;M++){var E=4*M,I=3*M;x[E]=Math.floor(256*this.clamp(_[I]/O,0,.9999)),x[E+1]=Math.floor(256*this.clamp(_[I+1]/O,0,.9999)),x[E+2]=Math.floor(256*this.clamp(_[I+2]/O,0,.9999)),x[E+3]=255}g.putImageData(y,0,0);var q=Date.now();z.innerText="Pass: ".concat(O,"/").concat(o);var A=((q-i)/1e3).toPrecision(3);k.innerText="Time Taken: ".concat(A,"s"),O++}.bind(Object(l.a)(i));setTimeout((function(){return M()}))},i.animate=function(){i.state.animate&&(requestAnimationFrame(i.animate),i.drawImage(i.b),i.b+=.2,i.b>20&&(i.b=0))},i.toggleAnimation=function(){i.setState({animate:!i.state.animate},(function(){i.state.animate&&i.animate()}))},i.state={canvasDOM:null,ctx:null,animate:!1},i.b=0,i}return Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=document.getElementById("myCanvas");t.style.visibility="hidden",t.width=this.props.width,t.height=this.props.height;var n=t.getContext("2d");this.setState({canvasDOM:t,ctx:n})}},{key:"render",value:function(){var t=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return t.buildImage(1)},id:"buildImageBtn",className:"btn"},"Build Image"),a.a.createElement("button",{onClick:function(){return t.toggleAnimation()},id:"buildImageBtn2",className:"btn"},this.state.animate?"Stop ":"Start ","Animation"),a.a.createElement("p",{id:"passValue"}),a.a.createElement("p",{id:"timeTaken"}),a.a.createElement("canvas",{id:"myCanvas"}))}}]),e}(i.Component),x=function(t){Object(u.a)(e,t);var n=Object(d.a)(e);function e(t){var i;Object(c.a)(this,e),i=n.call(this,t);var a=window.innerWidth,r=window.innerHeight,o=a/r,s=Math.floor(.5*a),u=Math.floor(.5*r);return i.state={aspectRatio:o,width:s,height:u,samples_per_pixel:1},i}return Object(s.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"main-content"},a.a.createElement("div",{className:"canvas-container"},a.a.createElement(y,{samples_per_pixel:this.state.samples_per_pixel,width:this.state.width,height:this.state.height}))))}}]),e}(a.a.Component);var j=function(){return a.a.createElement(x,null)},O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(t,n){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var e=t.installing;null!=e&&(e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(t)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}o.a.render(a.a.createElement(j,null),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/3D-rendering-engine-js",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/3D-rendering-engine-js","/service-worker.js");O?(!function(t,n){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(e){var i=e.headers.get("content-type");404===e.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):_(t,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):_(n,t)}))}}()},8:function(t,n,e){t.exports=e(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.31c84158.chunk.js.map